<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vitologi:inputtags example</title>
    <link rel="stylesheet" type="text/css" href="../src/inputtags.css" />
    <script src="../src/inputtags.js"></script>

    <link rel="stylesheet" href="vendors/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="vendors/bootstrap/bootstrap-theme.min.css" />
    <script src="vendors/jquery/jquery-1.11.3.min.js"></script>
    <script src="vendors/bootstrap/bootstrap.min.js"></script>
    <style>
        pre{
            font-size: 1em;
            padding: 10px;
            margin: 0 0 20px;
            border:0;
            border-left: 5px solid #dcdcdc;
            background: #f5f5f5;
            border-radius: 0;
        }
        blockquote{
            font-size: 1em;
        }
        .table>tbody>tr>td{
            vertical-align: middle;}
        .blockExample{
            position:relative;
            padding: 5px;
            margin: 5px;
            border: 1px solid #979797;
            background: rgba(0, 0, 0, 0.04);
            color: #7b7b7b;}
        .classExample{
            font-weight: bold;}
    </style>
    <script>
        Inputtags = vitologi.inputtags;
    </script>
</head>
<body>

<div class="container">
    <div class="text-center">
        <h1>Vitologi inputtags plugin</h1>
    </div>
    <br />

    <div class="row">
        <div class="col-md-12">
            <h2>Description</h2>
            <hr />
            <p>
                This plugin transforms ordinary form input fields into fields which allow easy creation of tags.
            </p>
        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <h2>Simple usage</h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="simple" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="simpleShow">unique tags (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var simple = document.getElementById("simple"),
                            simpleInputtags = new Inputtags(simple,{
                                "onChange":function(){
                                    document.getElementById("simpleShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#collapseSimpleCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#collapseSimpleDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="collapseSimpleCode">
                        <pre>
var input = document.getElementById("input"),
    inputInputtags = new Inputtags(input);</pre>
                    </div>
                    <div class="collapse" id="collapseSimpleDescription">
                        <blockquote>
                            Simple use case to work with unique tags
                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <h2>Repeat tags</h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="repeat" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="repeatShow">not unique tags (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var repeat = document.getElementById("repeat"),
                            repeatInputtags = new Inputtags(repeat,{
                                "duplicate":true,
                                "onChange":function(){
                                    document.getElementById("repeatShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#collapseRepeatCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#collapseRepeatDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="collapseRepeatCode">
                        <pre>
var input = document.getElementById("input"),
    inputInputtags = new Inputtags(input,{
        "duplicate":true
    });</pre>
                    </div>
                    <div class="collapse" id="collapseRepeatDescription">
                        <blockquote>
                            Repeat tags case allows you work with not unique tags
                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>



    <div class="row">
        <div class="col-md-12">
            <h2>Tag objects</h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="object" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="objectShow">tag-objects (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var object = document.getElementById("object"),
                            objectInputtags = new Inputtags(object,{
                                "keyName":"key",
                                "valueName":"value",
                                "onChange":function(){
                                    document.getElementById("objectShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#objectCollapseCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#objectCollapseDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="objectCollapseCode">
                        <pre>
var input = document.getElementById("input"),
    inputInputtags = new Inputtags(input,{
        "keyName":"key",
        "valueName":"value"
    });</pre>
                    </div>
                    <div class="collapse" id="objectCollapseDescription">
                        <blockquote>
                            Work with array of objects without messing object's stucture if set "keyName" and "valueName" properties.
                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>



    <div class="row">
        <div class="col-md-12">
            <h2>Tag sources</h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="source" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="sourceShow">tag sources (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var source = document.getElementById("source"),
                            sourceInputtags = new Inputtags(source,{
                                "source":function(cursorValue){
                                    var source;

                                    if(cursorValue.toLowerCase().indexOf("t") !== -1){
                                        source = ["Tag1","Tag2","Tag3","Tag4","Tag5","Tag6"];
                                    }else{
                                        source = ["Link1","Link2","Link3","Link4","Link5","Link6"];
                                    }

                                    return source;
                                },
                                "onChange":function(){
                                    document.getElementById("sourceShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#sourceCollapseCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#sourceCollapseDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="sourceCollapseCode">
                        <pre>
var input = document.getElementById("input"),
    inputInputtags = new Inputtags(input,{
        "source":function(cursorValue){
            var source;

            if(cursorValue.toLowerCase().indexOf("t") !== -1){
                source = ["Tag1","Tag2","Tag3","Tag4","Tag5","Tag6"];
            }else{
                source = ["Link1","Link2","Link3","Link4","Link5","Link6"];
            }

            return source;
        }
});</pre>
                    </div>
                    <div class="collapse" id="sourceCollapseDescription">
                        <blockquote>
                            Inputtags is also capable to use different sources of pre-defined tags.
                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <h2>Style customization</h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="style" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="styleShow">changed css class (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var style = document.getElementById("style"),
                            styleInputtags = new Inputtags(style,{
                                "source":function(cursorValue){
                                    return ["Tag1","Tag2","Tag3","Link1","Link2","Link3"];
                                },
                                "getTagClass":function(tag){
                                    var text = tag.getVal();
                                    return (text.indexOf("Link")!== -1)?"bInputtags__tag label-info":"bInputtags__tag";
                                },
                                "onChange":function(){
                                    document.getElementById("styleShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#styleCollapseCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#styleCollapseDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="styleCollapseCode">
                        <pre>
var input = document.getElementById("input"),
    inputInputtags = new Inputtags(input,{
        "source":function(cursorValue){
            return ["Tag1","Tag2","Tag3","Link1","Link2","Link3"];
        },
        "getTagClass":function(tag){
            var text = tag.getVal();
            return (text.indexOf("Link")!== -1)?"bInputtags__tag label-info":"bInputtags__tag";
        }
    });</pre>
                    </div>
                    <div class="collapse" id="styleCollapseDescription">
                        <blockquote>
                            In this case we check item and set custom style for it.
                            <br/>Inputtags can be styled by modifying "getClass" handlers of parameters. For example:
                            <br/>
                            <br/>
                            <ul>
                                <li>"getInputtagsClass" set css class for Inputtags element</li>
                                <li>"getTagClass" set css class for Tag element</li>
                                <li>"getSourceItemClass" set css class for Item element in source list</li>
                            </ul>

                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h2>Block's structure</h2>
            <hr />

            <div class="row">
                <div class="col-md-12">
                    Let's observe some basic aspect of plugin structure like used classes and HTML elements.
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">

                    <a class="btn btn-link" data-toggle="collapse" href="#structureCollapseCode" aria-expanded="false">
                        View
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#structureCollapseDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="structureCollapseCode">
                        <blockquote>
                            <div class="blockExample" style="border-style: dashed;">
                                raw input element (HTML element)
                            </div>
                            <div class="blockExample" >
                                <span class="pull-right classExample">Inputtags</span>

                                <div class="blockExample pull-left classExample">Tag <span style="text-shadow: none;color: black;">x</span></div>
                                <div class="blockExample pull-left classExample">Tag <span style="text-shadow: none;color: black;">x</span></div>
                                <div class="blockExample pull-left classExample">Cursor</div>

                                <div class="clearfix"></div>

                                <div class="blockExample pull-left" style="border-style: dashed; margin-top: 20px;">
                                    <span class="pull-right classExample">SourceList</span>
                                    <div class="clearfix"></div>
                                    <div class="blockExample">source list item</div>
                                    <div class="blockExample">source list item</div>
                                    <div class="blockExample">source list item</div>

                                    <div class="clearfix"></div>

                                </div>

                            </div>
                            <div class="clearfix"></div>
                        </blockquote>
                    </div>
                    <div class="collapse" id="structureCollapseDescription">
                        <blockquote>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            There is only four object which construct Inputtags (Cursor, SourceList, Tag and Inputtags). Each of them has own view (HTML element) and some individual methods.
                            You have direct access only to the base object (Inputtags), but all constructors are put in <strong>vitologi.inputtags._class</strong> namespace. This allows you overwrite some prototype methods or create object instance.
                            <br/>&nbsp;&nbsp;&nbsp;&nbsp;
                            Also there is an object with parameters (imagine a builder). You can redefine it when you create Inputtags from HTML-input.

                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <h2>Parameters and classes API</h2>
            <hr />

            <div class="row">
                <div class="col-md-12">
                    Below, you can find API description of main plugin components.
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">

                    <a class="btn btn-link" data-toggle="collapse" href="#paramsCollapseCode" aria-expanded="false">
                        Classes
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#paramsCollapseDescription" aria-expanded="false">
                        Parameters
                    </a>
                    <div class="collapse" id="paramsCollapseCode">
                        <blockquote>
                            <table class="table table-bordered">
                                <tr>
                                    <th width="30%" class="text-center">Class/Method name</th>
                                    <th class="text-center">Description</th>
                                </tr>
                                <tr class="active">
                                    <td class="text-center"><strong>Inputtags(<i>element, parameters</i>)</strong></td>
                                    <td>
                                        Main plugins constructor, it responsible for combine all plugin elements and synchronization with modified input
                                        <br /><i>element</i> - raw form input (HTML element)
                                        <br /><i>parameters</i> - configuration object
                                    </td>
                                </tr>

                                <tr>
                                    <td>getVal()</td>
                                    <td>get all tags data</td>
                                </tr>
                                <tr>
                                    <td>hasVal(<i>item</i>)</td>
                                    <td>
                                        check the existence of the tag/item
                                        <br />
                                        <i>item</i> - tag data
                                    </td>
                                </tr>
                                <tr>
                                    <td>synchronize()</td>
                                    <td>synchronize object with DOM Element</td>
                                </tr>


                                <tr class="active">
                                    <td class="text-center"><strong>Tag(<i>item, parameters</i>)</strong></td>
                                    <td>
                                        Tags constructor
                                        <br /><i>item</i> - tag data
                                        <br /><i>parameters</i> - configuration object
                                    </td>
                                </tr>
                                <tr>
                                    <td>getView()</td>
                                    <td>get block's HTML element</td>
                                </tr>
                                <tr>
                                    <td>getVal()</td>
                                    <td>get tag data</td>
                                </tr>



                                <tr class="active">
                                    <td class="text-center"><strong>Cursor(<i>parameters</i>)</strong></td>
                                    <td>
                                        Entry point for input tags
                                        <br /><i>parameters</i> - configuration object
                                    </td>
                                </tr>

                                <tr>
                                    <td>getView()</td>
                                    <td>get block's HTML element</td>
                                </tr>
                                <tr>
                                    <td>getVal()</td>
                                    <td>get cursor value</td>
                                </tr>
                                <tr>
                                    <td>setVal(<i>val</i>)</td>
                                    <td>
                                        set cursor value
                                        <br /><i>val</i> - setted text
                                    </td>
                                </tr>

                                <tr class="active">
                                    <td class="text-center"><strong>SourceList(<i>parameters</i>)</strong></td>
                                    <td>
                                        List of tags (source)
                                        <br /><i>parameters</i> - configuration object
                                    </td>
                                </tr>
                                <tr>
                                    <td>getView()</td>
                                    <td>get block's HTML element</td>
                                </tr>
                                <tr>
                                    <td>addItem(<i>item</i>)</td>
                                    <td>
                                        append new item to tags list
                                        <br /><i>item</i> - item (tag data)
                                    </td>
                                </tr>
                                <tr>
                                    <td>removeAllItems()</td>
                                    <td>delete all items from tags list</td>
                                </tr>

                            </table>
                        </blockquote>
                    </div>
                    <div class="collapse" id="paramsCollapseDescription">
                        <blockquote>
                            <table class="table table-bordered">
                                <tr>
                                    <th width="30%" class="text-center">Property name</th>
                                    <th class="text-center">Description</th>
                                </tr>

                                <tr class="active">
                                    <td>_inputtags</td>
                                    <td>store current Inputtags object</td>
                                </tr>
                                <tr class="active">
                                    <td>_cursor</td>
                                    <td>store current Cursor object</td>
                                </tr>
                                <tr class="active">
                                    <td>_sourceList</td>
                                    <td>store current SourceList object</td>
                                </tr>
                                <tr class="active">
                                    <td>_tags[]</td>
                                    <td>array of Tag objects</td>
                                </tr>
                                <tr>
                                    <td>duplicate</td>
                                    <td> {boolean} flag which allows have duplicate tags  </td>
                                </tr>
                                <tr>
                                    <td>keyName</td>
                                    <td> {string} name of object's identifier (if it is set, that tags data is using like an object)</td>
                                </tr>
                                <tr>
                                    <td>valueName</td>
                                    <td> {string} name of object's property to show (if it is set, that tags data is using like an object)</td>
                                </tr>
                                <tr>
                                    <td>getInputtagsClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for Inputtags HTML element
                                        <br />
                                        <i>item</i> - Inputtags instance
                                    </td>
                                </tr>
                                <tr>
                                    <td>getCursorClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for Cursor HTML element
                                        <br />
                                        <i>item</i> - Cursor instance
                                    </td>
                                </tr>
                                <tr>
                                    <td>getTagClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for Tag HTML element
                                        <br />
                                        <i>item</i> - Tag instance
                                    </td>
                                </tr>
                                <tr>
                                    <td>getTagRemoverClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for Tag component (close button)
                                        <br />
                                        <i>item</i> - Tag instance
                                    </td>
                                </tr>
                                <tr>
                                    <td>getSourceListClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for SourceList HTML element
                                        <br />
                                        <i>item</i> - SourceList instance
                                    </td>
                                </tr>
                                <tr>
                                    <td>getSourceItemClass(<i>item</i>)</td>
                                    <td>
                                        return string with css class name for set style for SourceList component (list item)
                                        <br />
                                        <i>item</i> - tag data object
                                    </td>
                                </tr>
                                <tr>
                                    <td>source(item)(<i>item</i>)</td>
                                    <td>
                                        return array of tag's data, after receive it will be used for creating source list
                                        <br />
                                        <i>item</i> - user input text (value of Cursor)
                                    </td>
                                </tr>
                                <tr>
                                    <td>onChange()</td>
                                    <td>
                                        execute after add or remove tags
                                    </td>
                                </tr>
                                <tr>
                                    <td>cursorHandler(e)(<i>e</i>)</td>
                                    <td>
                                        handler for cursor's "keyup" event
                                        <br />
                                        <i>e</i> - event object
                                    </td>
                                </tr>
                                <tr>
                                    <td>sourceListHandler(<i>item, e</i>)</td>
                                    <td>
                                        handler for choosing item in source list
                                        <br />
                                        <i>item</i> - chousen list item (tag data)
                                        <i>e</i> - event object
                                    </td>
                                </tr>
                                <tr>
                                    <td>addTag(<i>tag</i>)</td>
                                    <td>
                                        function for append tag to collection and HTML element to view
                                        <br />
                                        <i>tag</i> - added tag
                                    </td>
                                </tr>
                                <tr>
                                    <td>removeTag(<i>tag</i>)</td>
                                    <td>
                                        function for remove tag from collection and HTML element to view
                                        <br />
                                        <i>tag</i> - removed tag
                                    </td>
                                </tr>

                            </table>
                            * be aware, environments (this) of all executable function can be changed


                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h2>Extend plugin (asynchronous resource creation) </h2>
            <hr />

            <div class="row">
                <div class="col-md-6">
                    <input id="acync" type="text">
                    <br />
                </div>

                <div class="col-md-6">
                    <div class="form-control" id="acyncShow">changed css class (example)</div>
                    <br />
                </div>

            </div>
            <div class="row">
                <div class="col-md-12">
                    <script>
                        var acync = document.getElementById("acync"),

                            // small function for server simulation
                            serverSimulator = function(needle, callback){

                                window.setTimeout(function(){
                                    callback(null, ["Tag1","Tag2","Tag3","Link1","Link2","Link3"]);
                                }, (Math.random()*2)*1000);

                            },

                            acyncInputtags = new Inputtags(acync,{

                                "source":function(cursorValue){

                                    // get current list and cursor
                                    var list = this._sourceList,
                                        cursor = this._cursor;

                                    // send request on server
                                    serverSimulator(cursorValue, function(error, result){
                                        if(error)throw new Error("Get server data error.");

                                        // clear exist data
                                        list.removeAllItems();

                                        var aItem = result,
                                            cursorIsEmpty = cursor.getVal() === "",
                                            itemRegexp = new RegExp("^"+cursor.getVal()),
                                            len = aItem.length,
                                            i = 0, item;

                                        if(!len)return;

                                        // add received data to the list
                                        for(; i<len; i++){
                                            item = aItem[i];
                                            if(cursorIsEmpty || !itemRegexp.test(item))continue;
                                            list.addItem(result[i]);
                                        }



                                    });

                                },
                                "onChange":function(){
                                    document.getElementById("acyncShow").innerHTML = JSON.stringify(this.getVal());
                                }
                            });

                    </script>

                    <a class="btn btn-link" data-toggle="collapse" href="#acyncCollapseCode" aria-expanded="false">
                        Code
                    </a>
                    <a class="btn btn-link" data-toggle="collapse" href="#acyncCollapseDescription" aria-expanded="false">
                        Description
                    </a>
                    <div class="collapse" id="acyncCollapseCode">
                        <pre>
var input = document.getElementById("input"),

    // small function for server simulation
    serverSimulator = function(needle, callback){

        window.setTimeout(function(){
            callback(null, ["Tag1","Tag2","Tag3","Link1","Link2","Link3"]);
        }, (Math.random()*2)*1000);

    },

    inputInputtags = new Inputtags(input,{

        "source":function(cursorValue){

            // get current list and cursor
            var list = this._sourceList,
                cursor = this._cursor;

            // send request on server
            serverSimulator(cursorValue, function(error, result){
                if(error)throw new Error("Get server data error.");

                // clear exist data
                list.removeAllItems();

                var aItem = result,
                    cursorIsEmpty = cursor.getVal() === "",
                    itemRegexp = new RegExp("^"+cursor.getVal()),
                    len = aItem.length,
                    i = 0, item;

                if(!len)return;

                // add received data to the list
                for(; i&lt;len; i++){
                    item = aItem[i];
                    if(cursorIsEmpty || !itemRegexp.test(item))continue;
                    list.addItem(result[i]);
                }
            });
        }
    });</pre>
                    </div>
                    <div class="collapse" id="acyncCollapseDescription">
                        <blockquote>
                            Just start typing like "Li" or "T" (uppercase is need), than source list will fill by some items (2s delay).
                            <br />This is an example of extend plugin. In fact, ajax source feature, will be add in next version (I hope :)).
                            <br />In case above, you see how easy we can get access to main plugin's components and overwrite them.
                        </blockquote>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

</body>
</html>
